# Импорты для работы с переменными окружения и типами
import os  # Модуль для работы с операционной системой (получение переменных окружения)
from typing import Optional  # Тип для опциональных значений (может быть значение или None)

# ============================================================================
# НАСТРОЙКИ API ПРИЛОЖЕНИЯ КЛУБА
# ============================================================================
# Эти настройки используются для подключения к API приложения клуба.
# Значения можно задать двумя способами:
# 1. Через переменные окружения (рекомендуется для безопасности)
# 2. Напрямую в этом файле (значения по умолчанию)

# Базовый URL API приложения клуба
# os.getenv("CLUB_API_URL", "https://127.0.0.1:8443") означает:
# - Сначала пытаемся получить значение из переменной окружения CLUB_API_URL
# - Если переменной нет - используем значение по умолчанию "https://127.0.0.1:8443"
# Это адрес, по которому находится API сервер приложения клуба
API_BASE_URL = os.getenv("CLUB_API_URL", "https://revaz.thelan.club")

# Логин для аутентификации в API
# os.getenv("CLUB_API_USERNAME", "Telegarm_bot_API") означает:
# - Сначала пытаемся получить значение из переменной окружения CLUB_API_USERNAME
# - Если переменной нет - используем значение по умолчанию "Telegarm_bot_API"
# Это логин, который используется для получения токена доступа к API
API_USERNAME = os.getenv("CLUB_API_USERNAME", "Telegarm_bot_API")

# Пароль для аутентификации в API
# os.getenv("CLUB_API_PASSWORD", "Revaz199609") означает:
# - Сначала пытаемся получить значение из переменной окружения CLUB_API_PASSWORD
# - Если переменной нет - используем значение по умолчанию "Revaz199609"
# Это пароль, который используется вместе с логином для получения токена
# ⚠️ ВАЖНО: Для безопасности лучше использовать переменные окружения!
API_PASSWORD = os.getenv("CLUB_API_PASSWORD", "Revaz199609")

# ID филиала (опционально)
# os.getenv("CLUB_API_BRANCH_ID", None) означает:
# - Сначала пытаемся получить значение из переменной окружения CLUB_API_BRANCH_ID
# - Если переменной нет - используем None (не задано)
# Это значение может быть нужно, если в системе несколько филиалов
# API может требовать указание филиала при аутентификации
API_BRANCH_ID = os.getenv("CLUB_API_BRANCH_ID", None)

# ID регистра (опционально)
# os.getenv("CLUB_API_REGISTER_ID", None) означает:
# - Сначала пытаемся получить значение из переменной окружения CLUB_API_REGISTER_ID
# - Если переменной нет - используем None (не задано)
# Это значение может быть нужно для идентификации точки продаж/регистра
# API может требовать указание регистра при аутентификации
API_REGISTER_ID = os.getenv("CLUB_API_REGISTER_ID", None)

# ============================================================================
# ПРЕОБРАЗОВАНИЕ ТИПОВ
# ============================================================================
# Переменные окружения всегда возвращают строки (str).
# Но для API нужны числа (int) для BranchId и RegisterId.
# Поэтому преобразуем строки в числа, если они заданы.

# Преобразование BranchId из строки в число
if API_BRANCH_ID:  # Если значение задано (не None и не пустая строка)
    try:
        # Пытаемся преобразовать строку в целое число
        # Например: "123" -> 123
        # Это нужно, потому что os.getenv() всегда возвращает строку
        API_BRANCH_ID = int(API_BRANCH_ID)
    except ValueError:
        # Если не удалось преобразовать (например, "abc" или пустая строка)
        # Оставляем None, чтобы не было ошибок при использовании
        API_BRANCH_ID = None

# Преобразование RegisterId из строки в число
if API_REGISTER_ID:  # Если значение задано (не None и не пустая строка)
    try:
        # Пытаемся преобразовать строку в целое число
        # Например: "456" -> 456
        # Это нужно, потому что os.getenv() всегда возвращает строку
        API_REGISTER_ID = int(API_REGISTER_ID)
    except ValueError:
        # Если не удалось преобразовать (например, "xyz" или пустая строка)
        # Оставляем None, чтобы не было ошибок при использовании
        API_REGISTER_ID = None

# ============================================================================
# КАК ИСПОЛЬЗОВАТЬ ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ (РЕКОМЕНДУЕТСЯ)
# ============================================================================
# Вместо изменения значений в этом файле, можно использовать переменные окружения.
# Это безопаснее, так как пароли не хранятся в коде и не попадут в Git.
#
# Windows (PowerShell):
#   $env:CLUB_API_URL="https://ваш_адрес:порт"
#   $env:CLUB_API_USERNAME="ваш_логин"
#   $env:CLUB_API_PASSWORD="ваш_пароль"
#   $env:CLUB_API_BRANCH_ID="1"  # опционально
#   $env:CLUB_API_REGISTER_ID="1"  # опционально
#
# Windows (CMD):
#   set CLUB_API_URL=https://ваш_адрес:порт
#   set CLUB_API_USERNAME=ваш_логин
#   set CLUB_API_PASSWORD=ваш_пароль
#   set CLUB_API_BRANCH_ID=1  # опционально
#   set CLUB_API_REGISTER_ID=1  # опционально
#
# Linux/Mac:
#   export CLUB_API_URL="https://ваш_адрес:порт"
#   export CLUB_API_USERNAME="ваш_логин"
#   export CLUB_API_PASSWORD="ваш_пароль"
#   export CLUB_API_BRANCH_ID="1"  # опционально
#   export CLUB_API_REGISTER_ID="1"  # опционально
#
# Или создайте файл .env (если используете python-dotenv):
#   CLUB_API_URL=https://ваш_адрес:порт
#   CLUB_API_USERNAME=ваш_логин
#   CLUB_API_PASSWORD=ваш_пароль
#   CLUB_API_BRANCH_ID=1
#   CLUB_API_REGISTER_ID=1
#   CLUB_API_DISABLE_SSL_VERIFY=true  # опционально: отключить проверку SSL сертификатов

